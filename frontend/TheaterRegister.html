<html>
<head>

<link rel="stylesheet" href="css/registration.css">
<script src="/js/axios.js" ></script>
</head>
<body>
<div class="left">
    <a class="clear-link-style" href="/">
        <h3>Sky Movies</h3>
    </a>
</div>
<div>
 </div>
<div class="login-box">
    <h2>THEATRE REGISTRATION</h2>
    
      <form id="registration-form" method="post">
     
      <div class="user-box" >
        <input type="text"   name="emailId" required pattern="[^@\s]+@[^@\s]+\.[^@\s]+" title="Invalid email address" autocomplete="off">
        
        <label >Email Id</label>
          
         
      </div>
     <div class="user-box" >
      <input type="password"  name="password" required pattern=".{4,}" title="Eight or more characters" autocomplete="off">
      <label>Password</label>
        
      </div>
     
      <button onclick="return onRegister()" >
        
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        REGISTER
      </button>
     </form>
  <script>
    function onRegister() {
      const registrationForm = document.getElementById("registration-form");
      const isValid = registrationForm.checkValidity();

      if (isValid) {

        const formData = new FormData(registrationForm);

        const formDataObj = {};

        formData.forEach((value, key) => {
          formDataObj[key] = value;

        });
        
        axios.post('/api/admin/create', formDataObj)
        .then((res) => {
            window.location = "/TheaterLogin.html";
        }).catch((error) => {
          const errorMessage = error?.response?.data?.message || 'Something went wrong!';
          alert(errorMessage);
        });
      } else {
        console.log("Validation fails")
      }
      return false;
    }
    </script>
</body>
</html>