<html>
<head>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="left">
<h3>Sky Movies</h3></div>
<div>
<a href="/">Home</a>
 </div>
<div class="login-box">
  <h2>Login</h2>
  <form id="adminlogin-form" method="post">
    <div class="user-box">
      <input type="text" id="userName" name="userName" required >
      <label>Username</label>
    </div>
    <div class="user-box">
      <input type="password" id="password" name="password" required >
      <label>Password</label>
    </div>
    
    <button onclick="return onAdmin()">
      <span></span>
      <span></span>
      <span></span>
      <span></span>
     submit
    </button>
    </a>
  </form> 
  </div> 
 
  <script>
    function onAdmin() {
      const adminloginForm = document.getElementById("adminlogin-form");
      const isValid = loginForm.checkValidity();

      if (isValid) {

        const formData = new FormData(loginForm);

        const formDataObj = {};

        formData.forEach((value, key) => {
          formDataObj[key] = value;
        })

     
        
        fetch('http://localhost:3000/admin/create',{
        
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify(formDataObj)
        }).then((response) => {
          if (response.ok) {
            return response.json();
          }
          throw new Error('Something went wrong');
        }).then((res) => {
          if (res.status === 1) {
            window.location = "/TheaterHomePage.html"
          } else {
            alert("Error response")
          }
        }).catch(() => {
          alert("Error loging the user");
        });
      } else {
        console.log("no")
      }


      return false;
    }
    </script>
</body>
</html>